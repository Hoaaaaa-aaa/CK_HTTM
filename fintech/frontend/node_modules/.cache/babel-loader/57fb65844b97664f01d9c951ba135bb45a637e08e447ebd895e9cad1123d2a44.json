{"ast":null,"code":"var _jsxFileName = \"D:\\\\CK_HTTTM\\\\expense-tracker_fullstack\\\\frontend\\\\src\\\\Components\\\\SupersetChart\\\\SupersetChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SupersetChart = () => {\n  _s();\n  // Di chuyển các biến môi trường vào .env\n  const SUPERSET_URL = process.env.REACT_APP_SUPERSET_URL || \"https://f8f472ba.us2a.app.preset.io\";\n  const DASHBOARD_ID = process.env.REACT_APP_DASHBOARD_ID || \"6b072f55-bf3b-473f-9145-20e8a68cb390\";\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Xử lý sự kiện khi iframe load xong\n    const handleIframeLoad = () => {\n      setLoading(false);\n    };\n    window.addEventListener('message', event => {\n      // Kiểm tra origin để đảm bảo an toàn\n      if (event.origin === SUPERSET_URL) {\n        // Xử lý các message từ Superset dashboard nếu cần\n        console.log('Message from Superset:', event.data);\n      }\n    });\n    return () => {\n      // Cleanup event listeners\n      window.removeEventListener('message', handleIframeLoad);\n    };\n  }, [SUPERSET_URL]);\n  return /*#__PURE__*/_jsxDEV(EmbedStyled, {\n    children: [loading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n      src: `${SUPERSET_URL}/embedded/${DASHBOARD_ID}`,\n      title: \"Superset Dashboard\",\n      frameBorder: \"0\",\n      allowFullScreen: true,\n      onLoad: () => setLoading(false),\n      style: {\n        opacity: loading ? 0 : 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n_s(SupersetChart, \"J7PPXooW06IQ11rfabbvgk72KFw=\");\n_c = SupersetChart;\nconst EmbedStyled = styled.div`\n    position: relative;\n    width: 100%;\n    height: 400px; // Điều chỉnh chiều cao phù hợp với layout\n    \n    iframe {\n        width: 100%;\n        height: 100%;\n        border: none;\n        transition: opacity 0.3s ease;\n    }\n`;\n_c2 = EmbedStyled;\nconst LoadingSpinner = styled.div`\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    // Thêm styles cho loading spinner\n`;\n_c3 = LoadingSpinner;\nexport default SupersetChart;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SupersetChart\");\n$RefreshReg$(_c2, \"EmbedStyled\");\n$RefreshReg$(_c3, \"LoadingSpinner\");","map":{"version":3,"names":["React","useState","useEffect","styled","SupersetChart","SUPERSET_URL","process","env","REACT_APP_SUPERSET_URL","DASHBOARD_ID","REACT_APP_DASHBOARD_ID","loading","setLoading","handleIframeLoad","window","addEventListener","event","origin","console","log","data","removeEventListener","opacity","EmbedStyled","div","LoadingSpinner"],"sources":["D:/CK_HTTTM/expense-tracker_fullstack/frontend/src/Components/SupersetChart/SupersetChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SupersetChart = () => {\r\n    // Di chuyển các biến môi trường vào .env\r\n    const SUPERSET_URL = process.env.REACT_APP_SUPERSET_URL || \"https://f8f472ba.us2a.app.preset.io\";\r\n    const DASHBOARD_ID = process.env.REACT_APP_DASHBOARD_ID || \"6b072f55-bf3b-473f-9145-20e8a68cb390\";\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Xử lý sự kiện khi iframe load xong\r\n        const handleIframeLoad = () => {\r\n            setLoading(false);\r\n        };\r\n\r\n        window.addEventListener('message', (event) => {\r\n            // Kiểm tra origin để đảm bảo an toàn\r\n            if (event.origin === SUPERSET_URL) {\r\n                // Xử lý các message từ Superset dashboard nếu cần\r\n                console.log('Message from Superset:', event.data);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            // Cleanup event listeners\r\n            window.removeEventListener('message', handleIframeLoad);\r\n        };\r\n    }, [SUPERSET_URL]);\r\n\r\n    return (\r\n        <EmbedStyled>\r\n            {loading && <LoadingSpinner>Loading...</LoadingSpinner>}\r\n            <iframe\r\n                src={`${SUPERSET_URL}/embedded/${DASHBOARD_ID}`}\r\n                title=\"Superset Dashboard\"\r\n                frameBorder=\"0\"\r\n                allowFullScreen\r\n                onLoad={() => setLoading(false)}\r\n                style={{ opacity: loading ? 0 : 1 }}\r\n            />\r\n        </EmbedStyled>\r\n    );\r\n};\r\n\r\nconst EmbedStyled = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 400px; // Điều chỉnh chiều cao phù hợp với layout\r\n    \r\n    iframe {\r\n        width: 100%;\r\n        height: 100%;\r\n        border: none;\r\n        transition: opacity 0.3s ease;\r\n    }\r\n`;\r\n\r\nconst LoadingSpinner = styled.div`\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    // Thêm styles cho loading spinner\r\n`;\r\n\r\nexport default SupersetChart;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,mBAAmB;AAAC;AAEvC,MAAMC,aAAa,GAAG,MAAM;EAAA;EACxB;EACA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,qCAAqC;EAChG,MAAMC,YAAY,GAAGH,OAAO,CAACC,GAAG,CAACG,sBAAsB,IAAI,sCAAsC;EACjG,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACZ;IACA,MAAMW,gBAAgB,GAAG,MAAM;MAC3BD,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDE,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAGC,KAAK,IAAK;MAC1C;MACA,IAAIA,KAAK,CAACC,MAAM,KAAKZ,YAAY,EAAE;QAC/B;QACAa,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEH,KAAK,CAACI,IAAI,CAAC;MACrD;IACJ,CAAC,CAAC;IAEF,OAAO,MAAM;MACT;MACAN,MAAM,CAACO,mBAAmB,CAAC,SAAS,EAAER,gBAAgB,CAAC;IAC3D,CAAC;EACL,CAAC,EAAE,CAACR,YAAY,CAAC,CAAC;EAElB,oBACI,QAAC,WAAW;IAAA,WACPM,OAAO,iBAAI,QAAC,cAAc;MAAA,UAAC;IAAU;MAAA;MAAA;MAAA;IAAA,QAAiB,eACvD;MACI,GAAG,EAAG,GAAEN,YAAa,aAAYI,YAAa,EAAE;MAChD,KAAK,EAAC,oBAAoB;MAC1B,WAAW,EAAC,GAAG;MACf,eAAe;MACf,MAAM,EAAE,MAAMG,UAAU,CAAC,KAAK,CAAE;MAChC,KAAK,EAAE;QAAEU,OAAO,EAAEX,OAAO,GAAG,CAAC,GAAG;MAAE;IAAE;MAAA;MAAA;MAAA;IAAA,QACtC;EAAA;IAAA;IAAA;IAAA;EAAA,QACQ;AAEtB,CAAC;AAAC,GAvCIP,aAAa;AAAA,KAAbA,aAAa;AAyCnB,MAAMmB,WAAW,GAAGpB,MAAM,CAACqB,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC,MAXID,WAAW;AAajB,MAAME,cAAc,GAAGtB,MAAM,CAACqB,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC,MANIC,cAAc;AAQpB,eAAerB,aAAa;AAAC;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}